var S=Object.defineProperty;var _=Object.getOwnPropertySymbols;var O=Object.prototype.hasOwnProperty,w=Object.prototype.propertyIsEnumerable;var C=(e,t,o)=>t in e?S(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,x=(e,t)=>{for(var o in t||(t={}))O.call(t,o)&&C(e,o,t[o]);if(_)for(var o of _(t))w.call(t,o)&&C(e,o,t[o]);return e};var f=(e,t,o)=>new Promise((E,h)=>{var b=a=>{try{u(o.next(a))}catch(p){h(p)}},m=a=>{try{u(o.throw(a))}catch(p){h(p)}},u=a=>a.done?E(a.value):Promise.resolve(a.value).then(b,m);u((o=o.apply(e,t)).next())});import{_ as I,aj as M,P as R,h as y}from"./index.5678fbaf.js";import{A as P,P as v,a as k,a0 as d,B as N,a1 as W,a6 as l,w as c,ae as A}from"./vendor.e08ba229.js";import{B as H,T as L}from"./TableImg.8fa1a465.js";import{T as Y}from"./BasicForm.b5d6094e.js";import{u as $}from"./useTable.54a2c50f.js";import{g as V,r as z,d as q,i as G}from"./order.800fae8a.js";import{E as K,I as U}from"./index.57c694b6.js";import{P as X}from"./index.1f2bc229.js";import{u as J}from"./index.b811b2f1.js";import{O as Q,c as Z,s as ee}from"./OperateOrderModal.0aa2073a.js";import{j as oe}from"./Export2Excel.53c85573.js";/* empty css                *//* empty css              */import"./useForm.5db1be8a.js";/* empty css                *//* empty css                *//* empty css               */import"./uuid.1226a91f.js";import"./useWindowSizeFn.5dd3a6d6.js";import"./onMountedOrActivated.af9416e3.js";/* empty css               */import"./useSortable.06293d2d.js";/* empty css                *//* empty css                *//* empty css               *//* empty css               */import"./index.f6db3164.js";import"./upload.486231f6.js";/* empty css                *//* empty css                */import"./download.2b91008f.js";import"./base64Conver.08b9f4ec.js";import"./index.2b7dfa36.js";/* empty css               *//* empty css                */import"./useContentViewHeight.bb79e080.js";const te=P({name:"OperateOrderManagement",components:{BasicTable:H,PageWrapper:X,OperateOrderModal:Q,ExpExcelModal:K,TableImg:L,TableAction:Y,ImpExcel:U},setup(){const e=M.OPERATE,[t,{openModal:o}]=J(),{createConfirm:E}=y(),h=v({}),{push:b}=k(),[m,{reload:u}]=$({title:"\u8BA2\u5355\u5217\u8868",api:V,rowKey:"id",columns:Z,formConfig:{labelWidth:80,schemas:ee,autoSubmitOnEnter:!0},showIndexColumn:!1,useSearchForm:!0,showTableSetting:!0,bordered:!0,handleSearchInfoFn(s){return console.log("handleSearchInfoFn",s),s}});function a(s){const i=x({},s);o(!0,{record:i,isUpdate:!0})}function p(s){return f(this,null,function*(){yield z({id:s.id}),u()})}function g(s){return f(this,null,function*(){const i=x({},s);b({path:R.ORDER_DESC,query:{id:i.id}})})}function j(){return f(this,null,function*(){E({iconType:"warning",title:"\u6E29\u99A8\u63D0\u793A",content:"\u786E\u8BA4\u5220\u9664\u5417\uFF1F",onOk:()=>f(this,null,function*(){yield q({}),u()})})})}function F(){u()}function B(s){return f(this,null,function*(){const i=[];for(const T of s){const{results:D}=T;for(const n of D)["\u5F85\u53D1\u8D27","\u5DF2\u53D1\u8D27","\u5DF2\u5B8C\u6210"].includes(n.\u8BA2\u5355\u72B6\u6001)&&i.push({shopName:n.\u5E97\u94FA\u540D\u79F0,merchantId:n.\u5546\u6237\u53F7,shopCode:n.\u5E97\u94FA\u7F16\u7801,orderNo:n.\u8BA2\u5355\u53F7,orderStatus:n.\u8BA2\u5355\u72B6\u6001,totalPrice:n.\u5546\u54C1\u603B\u4EF7,freight:n.\u8FD0\u8D39,totalDiscount:n.\u4F18\u60E0\u603B\u989D,amount:n.\u5B9E\u4ED8\u91D1\u989D,productId:n.\u5546\u54C1ID,productName:n.\u5546\u54C1\u5168\u540D,orderNum:n.\u4E0B\u5355\u4EF6\u6570})}console.log(i),yield G({orders:i}),u()})}function r(T){return f(this,arguments,function*({filename:s,bookType:i}){const D=new Date().getTime(),n=new Array(1e5).fill({date:D});oe({data:n,header:{date:"\u65E5\u671F"},filename:s,merges:[],formulas:{},write2excelOpts:{bookType:i}})})}return{registerTable:m,searchInfo:h,registerModal:t,handleReceived:p,handleDeliver:a,delAds:j,handleEye:g,handleSuccess:F,OPERATE:e,loadDataSuccess:B,defaultHeader:r,openModal:o}}}),ne=A(" \u5BFC\u5165Excel "),se=A(" \u5BFC\u51FA\u7EDF\u8BA1\u6570\u636E "),ae=A(" \u6E05\u9664 ");function ue(e,t,o,E,h,b){const m=d("a-button"),u=d("ImpExcel"),a=d("TableImg"),p=d("TableAction"),g=d("BasicTable"),j=d("OperateOrderModal"),F=d("ExpExcelModal"),B=d("PageWrapper");return N(),W(B,{dense:"",contentFullHeight:"",contentClass:"flex"},{default:l(()=>[c(g,{onRegister:e.registerTable,searchInfo:e.searchInfo},{tableTitle:l(()=>[c(u,{onSuccess:e.loadDataSuccess,dateFormat:"YYYY-MM-DD"},{default:l(()=>[c(m,{class:"m-3"},{default:l(()=>[ne]),_:1})]),_:1},8,["onSuccess"]),c(m,{onClick:e.openModal},{default:l(()=>[se]),_:1},8,["onClick"]),c(m,{class:"m-3",onClick:e.delAds},{default:l(()=>[ae]),_:1},8,["onClick"])]),img:l(({text:r})=>[c(a,{size:60,simpleShow:!0,imgList:r},null,8,["imgList"])]),action:l(({record:r})=>[c(p,{actions:[{icon:"ant-design:eye-outlined",tooltip:"\u67E5\u770B\u8BA2\u5355",onClick:e.handleEye.bind(null,r)},{icon:"ant-design:car-twotone",tooltip:"\u6807\u8BB0\u53D1\u8D27",onClick:e.handleDeliver.bind(null,r),auth:[e.OPERATE],ifShow:s=>r.status==="2"},{icon:"ant-design:check-outlined",tooltip:"\u5B8C\u6210\u8BA2\u5355",popConfirm:{title:"\u662F\u5426\u786E\u8BA4\u5B8C\u6210\u8BA2\u5355\uFF1F",confirm:e.handleReceived.bind(null,r)},auth:[e.OPERATE],ifShow:s=>r.status==="3"}]},null,8,["actions"])]),_:1},8,["onRegister","searchInfo"]),c(j,{onRegister:e.registerModal,onSuccess:e.handleSuccess},null,8,["onRegister","onSuccess"]),c(F,{onRegister:e.registerModal,onSuccess:e.defaultHeader},null,8,["onRegister","onSuccess"])]),_:1})}var Ve=I(te,[["render",ue]]);export{Ve as default};
