var D=Object.defineProperty,v=Object.defineProperties;var O=Object.getOwnPropertyDescriptors;var b=Object.getOwnPropertySymbols;var T=Object.prototype.hasOwnProperty,C=Object.prototype.propertyIsEnumerable;var S=(e,o,t)=>o in e?D(e,o,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[o]=t,f=(e,o)=>{for(var t in o||(o={}))T.call(o,t)&&S(e,t,o[t]);if(b)for(var t of b(o))C.call(o,t)&&S(e,t,o[t]);return e},w=(e,o)=>v(e,O(o));var F=(e,o,t)=>new Promise((r,u)=>{var p=s=>{try{i(t.next(s))}catch(n){u(n)}},l=s=>{try{i(t.throw(s))}catch(n){u(n)}},i=s=>s.done?r(s.value):Promise.resolve(s.value).then(p,l);i((t=t.apply(e,o)).next())});import{B as M,b as j}from"./index.b811b2f1.js";import{B as x}from"./BasicForm.b5d6094e.js";import{u as R}from"./useForm.5db1be8a.js";import{u as A}from"./upload.486231f6.js";import{U as k,a as L}from"./uploadEnum.0c123c22.js";import{b as g}from"./goods.5d826801.js";import{aG as E,_ as W}from"./index.5678fbaf.js";import{A as G,r as B,u as _,j as U,a0 as I,B as $,a1 as q,a6 as V,w as z,a4 as N}from"./vendor.e08ba229.js";var d;(function(e){e.ADD_SWIPER="/admin/swiper/addSwiper",e.EDIT_SWIPER="/admin/swiper/editSwiper",e.EDIT_GOODS_TYPE="/admin/goodsType/editGoodsType",e.SWIPER_LIST="/admin/swiper/getSwiperList"})(d||(d={}));const H=(e,o="message")=>E.post({url:d.ADD_SWIPER,params:e},{errorMessageMode:o}),Y=(e,o="message")=>E.post({url:d.EDIT_SWIPER,params:e},{errorMessageMode:o}),le=(e,o="message")=>E.get({url:d.SWIPER_LIST,params:e},{errorMessageMode:o}),ne=[{title:"\u8F6E\u64ADID",dataIndex:"id",width:100},{title:"\u72B6\u6001",dataIndex:"status",width:180,customRender:({record:e})=>({"1":"\u542F\u7528","2":"\u7981\u7528"})[e.status]},{title:"\u5546\u54C1ID",dataIndex:"goods_id",width:100},{title:"\u7F29\u7565\u56FE",dataIndex:"url",width:180,slots:{customRender:"img"}},{title:"\u66F4\u65B0\u65F6\u95F4",dataIndex:"update_at",width:180},{title:"\u5907\u6CE8",dataIndex:"des"}],de=[{field:"id",label:"ID",component:"Input",labelWidth:80,colProps:{span:4}},{field:"status",label:"\u72B6\u6001",component:"Select",defaultValue:"1",colProps:{span:6},componentProps:{options:[{label:"\u542F\u7528",value:"1",key:"1"},{label:"\u7981\u7528",value:"2",key:"2"}]}}],J=[{field:"url",component:"Upload",label:"\u56FE\u7247",colProps:{span:16},rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u4E0A\u4F20\u56FE\u7247"}],componentProps:{api:A,accept:["image/*"],helpText:"image/*\u683C\u5F0F\u5E76\u4E14\u4E0D\u53EF\u5927\u4E8E1M,\u53EA\u5141\u8BB8\u4E0A\u4F20\u4E00\u5F20",maxSize:1,maxNumber:1,multiple:!1,uploadParams:{path:k.GOODS_SWIPER}}},{field:"type_id",component:"ApiSelect",label:"\u5546\u54C1\u5206\u7C7B",required:!0,componentProps:({formModel:e,formActionType:o})=>({api:L,labelField:"name",valueField:"id",params:{pid:0,reverse:!0},placeholder:"\u8BF7\u5148\u9009\u62E9\u5546\u54C1\u5206\u7C7B",onChange:t=>{let r=0;t&&(r=t),e.goods_id=void 0;const{updateSchema:u}=o;u({field:"goods_id",componentProps:()=>({api:g,labelField:"name",valueField:"id",params:{type_id:r}})})}})},{field:"goods_id",component:"ApiSelect",label:"\u5546\u54C1",required:!0,componentProps:({formModel:e})=>({api:g,labelField:"name",valueField:"id",params:{type_id:e.type_id||0}})},{field:"status",component:"Select",label:"\u72B6\u6001",required:!0,defaultValue:"1",componentProps:{options:[{label:"\u542F\u7528",value:"1",key:"1"},{label:"\u7981\u7528",value:"2",key:"2"}]}},{label:"\u5907\u6CE8",field:"des",component:"InputTextArea"}],K=G({name:"OperateSwiperDrawer",components:{BasicModal:M,BasicForm:x},emits:["success","register"],setup(e,{emit:o}){const t=B(!0),r=B(""),[u,{setFieldsValue:p,resetFields:l,validate:i,updateSchema:s}]=R({labelWidth:120,schemas:J,showActionButtonGroup:!1,actionColOptions:{span:23}}),[n,{setModalProps:m,closeModal:h}]=j(a=>F(this,null,function*(){l(),m({confirmLoading:!1}),t.value=!!(a==null?void 0:a.isUpdate),_(t)&&(Object.keys(a.record).forEach(c=>{a.record[c]||delete a.record[c]}),r.value=a.record.id,p(f({},a.record))),s({field:"goods_id",componentProps:({formModel:c})=>({api:g,labelField:"name",valueField:"id",params:{type_id:c.type_id||0}})})})),y=U(()=>_(t)?"\u7F16\u8F91\u8F6E\u64AD":"\u65B0\u589E\u8F6E\u64AD");function P(){return F(this,null,function*(){try{const a=yield i();m({confirmLoading:!0}),console.log(a),_(t)?yield Y(w(f({},a),{id:r.value})):yield H(a),h(),o("success",{isUpdate:!0})}finally{m({confirmLoading:!1})}})}return{registerDrawer:n,registerForm:u,getTitle:y,handleSubmit:P}}});function Q(e,o,t,r,u,p){const l=I("BasicForm"),i=I("BasicModal");return $(),q(i,N(e.$attrs,{onRegister:e.registerDrawer,title:e.getTitle,onOk:e.handleSubmit}),{default:V(()=>[z(l,{onRegister:e.registerForm},null,8,["onRegister"])]),_:1},16,["onRegister","title","onOk"])}var X=W(K,[["render",Q]]),pe=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:X});export{X as O,pe as a,ne as c,le as g,de as s};
