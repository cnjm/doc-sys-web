var v=Object.defineProperty,y=Object.defineProperties;var T=Object.getOwnPropertyDescriptors;var h=Object.getOwnPropertySymbols;var k=Object.prototype.hasOwnProperty,S=Object.prototype.propertyIsEnumerable;var _=(e,t,o)=>t in e?v(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,p=(e,t)=>{for(var o in t||(t={}))k.call(t,o)&&_(e,o,t[o]);if(h)for(var o of h(t))S.call(t,o)&&_(e,o,t[o]);return e},g=(e,t)=>y(e,T(t));var A=(e,t,o)=>new Promise((n,l)=>{var m=s=>{try{u(o.next(s))}catch(c){l(c)}},i=s=>{try{u(o.throw(s))}catch(c){l(c)}},u=s=>s.done?n(s.value):Promise.resolve(s.value).then(m,i);u((o=o.apply(e,t)).next())});import{B as D,b as O}from"./index.b811b2f1.js";import{B as E}from"./BasicForm.b5d6094e.js";import{u as U}from"./useForm.5db1be8a.js";import{g as j}from"./auth.04d33883.js";import{aG as f,_ as x}from"./index.5678fbaf.js";import{A as L,r as B,j as N,u as d,a0 as C,B as P,a1 as $,a6 as q,w as R,a4 as V}from"./vendor.e08ba229.js";var r;(function(e){e.ACCOUNT_LIST="/admin/administrators/getAccountList",e.ADD_ACCOUNT="/admin/administrators/addAccount",e.EDIT_ACCOUNT="/admin/administrators/editAccount",e.DEL_ACCOUNT="/admin/administrators/delAccount"})(r||(r={}));const ae=(e,t="message")=>f.get({url:r.ACCOUNT_LIST,params:e},{errorMessageMode:t}),G=(e,t="message")=>f.post({url:r.ADD_ACCOUNT,params:e},{errorMessageMode:t}),z=(e,t="message")=>f.post({url:r.EDIT_ACCOUNT,params:e},{errorMessageMode:t}),se=(e,t="message")=>f.post({url:r.DEL_ACCOUNT,params:e},{errorMessageMode:t}),ue=[{title:"\u8D26\u6237",dataIndex:"account",width:120},{title:"\u6635\u79F0",dataIndex:"name",width:120},{title:"\u72B6\u6001",dataIndex:"status",width:80,customRender:({record:e})=>e.status==="1"?"\u542F\u7528":"\u7981\u7528"},{title:"\u6743\u9650",dataIndex:"auth_key",width:200},{title:"\u90AE\u7BB1",dataIndex:"email",width:180},{title:"\u624B\u673A\u53F7",dataIndex:"phone",width:120},{title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"create_at",width:180},{title:"\u5907\u6CE8",dataIndex:"des"}],ne=[{field:"account",label:"\u8D26\u53F7",component:"Input",colProps:{span:6}},{field:"name",label:"\u6635\u79F0",component:"Input",colProps:{span:6}},{field:"status",label:"\u72B6\u6001",component:"Select",defaultValue:"",colProps:{span:6},componentProps:{options:[{label:"\u5168\u90E8",value:"",key:"0"},{label:"\u542F\u7528",value:"1",key:"1"},{label:"\u7981\u7528",value:"2",key:"2"}]}}],H=[{field:"account",label:"\u7528\u6237\u540D",required:!0,component:"Input"},{field:"password",label:"\u5BC6\u7801",component:"InputPassword",required:!0,ifShow:!1},{label:"\u6743\u9650",field:"auth_key",component:"ApiSelect",componentProps:{mode:"multiple",api:j,labelField:"name",valueField:"key"},required:!0},{field:"name",label:"\u6635\u79F0",component:"Input",required:!0},{label:"\u90AE\u7BB1",field:"email",component:"Input"},{label:"\u624B\u673A\u53F7",field:"phone",component:"Input"},{field:"status",component:"Select",label:"\u72B6\u6001",required:!0,defaultValue:"1",componentProps:{options:[{label:"\u542F\u7528",value:"1",key:"1"},{label:"\u7981\u7528",value:"2",key:"2"}]}},{label:"\u5907\u6CE8",field:"des",component:"InputTextArea"}],W=L({name:"AccountModal",components:{BasicModal:D,BasicForm:E},emits:["success","register"],setup(e,{emit:t}){const o=B(!0),n=B(""),[l,{setFieldsValue:m,updateSchema:i,resetFields:u,validate:s}]=U({labelWidth:100,schemas:H,showActionButtonGroup:!1,actionColOptions:{span:23}}),[c,{setModalProps:b,closeModal:I}]=O(a=>A(this,null,function*(){u(),b({confirmLoading:!1}),o.value=!!(a==null?void 0:a.isUpdate),d(o)&&(Object.keys(a.record).forEach(F=>{a.record[F]||delete a.record[F]}),n.value=a.record.id,m(p({},a.record))),i([{field:"password",ifShow:!d(o)}])})),M=N(()=>d(o)?"\u7F16\u8F91\u8D26\u53F7":"\u65B0\u589E\u8D26\u53F7");function w(){return A(this,null,function*(){try{const a=yield s();b({confirmLoading:!0}),a.auth_key=a.auth_key.join(","),d(o)?yield z(g(p({},a),{id:n.value})):yield G(a),I(),t("success",{isUpdate:d(o),values:g(p({},a),{id:n.value})})}finally{b({confirmLoading:!1})}})}return{registerModal:c,registerForm:l,getTitle:M,handleSubmit:w}}});function J(e,t,o,n,l,m){const i=C("BasicForm"),u=C("BasicModal");return P(),$(u,V(e.$attrs,{onRegister:e.registerModal,title:e.getTitle,onOk:e.handleSubmit}),{default:q(()=>[R(i,{onRegister:e.registerForm},null,8,["onRegister"])]),_:1},16,["onRegister","title","onOk"])}var K=x(W,[["render",J]]),re=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:K});export{K as A,re as a,ue as c,se as d,ae as g,ne as s};
